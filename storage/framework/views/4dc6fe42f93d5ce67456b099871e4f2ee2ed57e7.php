 <?php $__env->startSection('title', 'Gallery'); ?> <?php $__env->startSection('contents'); ?> <a data-toggle="modal" data-target="#modal-upload" class="new-btn" title="Add Image"><i class="icon-cloud-upload"></i></a> <div class="wrapper-md"> <?php if(Request::segment(4) == ''): ?> <div class="panel panel-tab"> <div class="row"> <div class="col-md-8 tab"> <ul class="list-inline"> <li class="btnFilter active" id="all"><a href="#">All</a></li> <li class="btnFilter" id='image'><a href="#">Images</a></li> <li class="btnFilter" id='document'><a href="#">Documents</a></li> <li class="btnFilter" id='archive'><a href="#">Archive</a></li> </ul> </div> </div> </div> <?php endif; ?> <div class="media" id='boxGalleries'> <div class="row"> <?php $__empty_1 = true; $__currentLoopData = $images; $__env->addLoop($__currentLoopData); foreach($__currentLoopData as $res): $__env->incrementLoopIndices(); $loop = $__env->getLastLoop(); $__empty_1 = false; ?> <?php $ext = explode('.',$res->file_name)[1]; ?> <?php if($ext == 'pdf' or $ext == 'xls' or $ext == 'doc' or $ext == 'docx'): ?> <div class="col-md-2 item document"> <button class="btn btn-danger delete" data-toggle="modal" data-target="#modal-delete" data-id="<?php echo e($res->id); ?>">Delete</button> <a href="<?php echo e(url('uploaded/'.$res->dir.'/',$res->file_name)); ?>" target="_blank"> <?php if($ext == 'pdf'): ?> <div class="media-item" style="background-image: url('<?php echo e(url('assets/admin/img/PDF.png')); ?>');"></div> <?php elseif($ext == 'xls'): ?> <div class="media-item" style="background-image: url('<?php echo e(url('assets/admin/img/Excel.png')); ?>');"></div> <?php elseif($ext == 'docx' || $ext = 'doc'): ?> <div class="media-item" style="background-image: url('<?php echo e(url('assets/admin/img/Word.png')); ?>');"></div> <?php endif; ?> </a> </div> <?php elseif($ext == 'rar' || $ext == 'zip'): ?> <div class="col-md-2 item archive"> <button class="btn btn-danger delete" data-toggle="modal" data-target="#modal-delete" data-id="<?php echo e($res->id); ?>">Delete</button> <a href="<?php echo e(url('uploaded/'.$res->dir.'/',$res->file_name)); ?>" target="_blank"> <div class="media-item" style="background-image: url('<?php echo e(url('assets/admin/img/Rar_Zip.png')); ?>');"></div> </a> </div> <?php else: ?> <div class="col-md-2 item image"> <button class="btn btn-danger delete" data-toggle="modal" data-target="#modal-delete" data-id="<?php echo e($res->id); ?>">Delete</button> <?php if($res->dir == 'download'): ?> <?php $link = url('uploaded/'.$res->dir.'/',$res->file_name); ?> <?php else: ?> <?php $link = url('uploaded/'.$res->dir.'/','thumb-'.$res->file_name); ?> <?php endif; ?> <a href="<?php echo e($link); ?>" target="_blank"> <?php if($res->dir == 'download'): ?> <div class="media-item" style="background-image: url('<?php echo e(url('uploaded/'.$res->dir.'/',$res->file_name)); ?>');"></div> <?php else: ?> <div class="media-item" style="background-image: url('<?php echo e(url('uploaded/'.$res->dir.'/','thumb-'.$res->file_name)); ?>');"></div> <?php endif; ?> </a> </div> <?php endif; ?> <?php endforeach; $__env->popLoop(); $loop = $__env->getLastLoop(); if ($__empty_1): ?> <h4 class="text-center">No Images Found.</h4> <?php endif; ?> </div> <div class="text-center"> <?php echo e($images->render()); ?> </div> </div> </div> <?php $__env->stopSection(); ?> <?php $__env->startSection('modal'); ?> <div class="modal fade" id="modal-upload" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"> <div class="modal-dialog modal-lg" role="document"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="closeModal close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button> <h4 class="modal-title" id="myModalLabel">Upload Images</h4> </div> <div class="modal-body"> <div id="form-errors"> </div> <div class="dropzone dz-clickable" id="uploadImages"> <div class="dz-message"> <h3>Drop files here or click to upload.</h3> <p>Pilih gambar dengan format PNG, JPG & JPEG - Ukuran Maks 5 Mb</p> </div> </div> </div> <div class="modal-footer"> <button type="button" class="closeModal btn btn-default" data-dismiss="modal">Close</button> </div> </div> </div> </div> <div class="modal fade" id="modal-delete" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"> <div class="modal-dialog modal-sm" role="document"> <form action="<?php echo e(route('images_delete')); ?>" method="post"> <?php echo e(csrf_field()); ?> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button> <h4 class="modal-title" id="myModalLabel">Delete Images</h4> </div> <div class="modal-body"> <input type="hidden" name="id"> Are you sure you want to delete this photo? </div> <div class="modal-footer"> <button type="button" class="btn btn-default" data-dismiss="modal">No</button> <button type="submit" class="btn btn-danger">Yes</button> </div> </div> </form> </div> </div> <?php $__env->stopSection(); ?> <?php $__env->startSection('registerscript'); ?> <script> Dropzone.autoDiscover = false; let id = '<?php echo e(Request::segment(4)); ?>'; $('#uploadImages').dropzone({ url: "<?php echo e(route('images_store')); ?>", autoProcessQueue: true, method: "post", acceptedFiles: "image/*", paramName: "filename", maxFilesize: 5, dictInvalidFileType: "File type not authorized", sending: function(file, xhr, formData) { formData.append("_token", "<?php echo e(csrf_token()); ?>"); formData.append("id_albums", id); }, init: function() { this.on("success",function(file, done){ $('#pagination').twbsPagination('destroy'); $.ajax({ url:'<?php echo e(route('images_list')); ?>', type:'GET', dataType:'JSON', success: function(data) { $('#pagination').twbsPagination({ totalPages: data.paging.last_page, visiblePages: 5, onPageClick: function (event, page) { dataImg(page); } }); } }); $("#boxGalleries").load(location.href + " #boxGalleries"); this.removeFile(file); }); this.on("error", function(file, done) { $('.dz-error-message span').text('This image rejected by server'); }); } }); $('.closeModal').click(function() { Dropzone.forElement("#uploadImages").removeAllFiles(true); }); </script> <?php $__env->stopSection(); ?>
<?php echo $__env->make('admin.layouts.main', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>