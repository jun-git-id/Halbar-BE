 <?php $__env->startSection('title', 'Posts'); ?> <?php $__env->startSection('contents'); ?> <a href="<?php echo e(route('posts_create')); ?>" class="new-btn" title="New Posts"><i class="glyphicon glyphicon-pencil"></i></a> <div class="bg-light lter b-b wrapper-md"> <h1 class="m-n font-thin h3">Post</h1> <small class="text-muted">With posts, users will feel closer to your business.</small> </div> <div class="wrapper-md"> <?php if( Session::has('success') ): ?> <div class="alert alert-success" role="alert"> <button type="button" class="close" data-dismiss="alert"> <span aria-hidden="true">&times;</span> <span class="sr-only">Close</span> </button> <?php echo e(session('success')); ?> </div> <?php endif; ?> <div class="row"> <div class="col-sm-8"> <?php if(count($posts) > 0): ?> <div class="blog-post"> <?php $__currentLoopData = $posts; $__env->addLoop($__currentLoopData); foreach($__currentLoopData as $p): $__env->incrementLoopIndices(); $loop = $__env->getLastLoop(); ?> <?php if($p->deleted_at == NULL): ?> <div class="panel panel-post"> <div class="action-post"> <div class="btn-group" role="group" aria-label="..."> <a href="<?php echo e(route('posts_edit', ['id' => $p->id])); ?>" type="button" class="btn btn-default">Edit</a> <a type="button" class="btn btn-danger" data-toggle="modal" data-target="#modal-delete" data-id="<?php echo e($p->id); ?>">Delete</a> </div> </div> <div> <img src="<?php echo e(asset('uploaded/media/'.$p->image)); ?>" width="100%"> </div> <div class="wrapper-lg"> <h2 class="m-t-none"><a href="<?php echo e(route('posts_detail', ['slug' => $p->slug ])); ?>"><?php echo e($p->title); ?></a></h2> <div> <p><?php echo e(readMore(['text' => $p->content, 'limit' => 150])); ?></p> </div> <a href="<?php echo e(route('posts_detail', ['slug' => $p->slug ])); ?>">Read More...</a> <div class="line line-lg b-b b-light"></div> <div class="text-muted"> <i class="glyphicon glyphicon-user"></i> &nbsp;by <a href="#" class="m-r-sm"><?php echo e($p->fullname); ?></a> <i class="glyphicon glyphicon-time"></i> &nbsp;<?php echo e(Carbon\Carbon::parse($p->published)->format('d F Y')); ?> </div> </div> </div> <?php endif; ?> <?php endforeach; $__env->popLoop(); $loop = $__env->getLastLoop(); ?> </div> <div class="text-center m-t-lg m-b-lg"> <ul class="pagination pagination-md"> <?php echo e($posts->appends(request()->except('page'))->links()); ?> </ul> </div> <?php else: ?> <div class="col-sm-12 text-center"> <br><br> <h2>You don't have a post yet, <a style="text-decoration:underline;" href='<?php echo e(route('posts')); ?>'>Back !</a></h2> <br><br> </div> <?php endif; ?> </div> <div class="col-sm-4"> <form action="<?php echo e(route('posts')); ?>" method="get"> <div class="form-group"> <input type="type" class="form-control input-lg" name="key" placeholder="Pencarian"> </div> </form> <?php if($drafts->count() > 0): ?> <h5 class="font-bold">You have <?php echo e($drafts->count()); ?></span> draft</h5> <ul class="list-group"> <?php $__currentLoopData = $drafts; $__env->addLoop($__currentLoopData); foreach($__currentLoopData as $draft): $__env->incrementLoopIndices(); $loop = $__env->getLastLoop(); ?> <li class="list-group-item"> <a href="<?php echo e(route('posts_edit', ['id' => $draft->id ])); ?>"> <?php echo e($draft->title); ?> </a> </li> <?php endforeach; $__env->popLoop(); $loop = $__env->getLastLoop(); ?> </ul> <?php endif; ?> <h5 class="font-bold">Categories</h5> <ul class="list-group"> <?php $__empty_1 = true; $__currentLoopData = $categories; $__env->addLoop($__currentLoopData); foreach($__currentLoopData as $valuePosts): $__env->incrementLoopIndices(); $loop = $__env->getLastLoop(); $__empty_1 = false; ?> <?php $__currentLoopData = $category; $__env->addLoop($__currentLoopData); foreach($__currentLoopData as $valueCategory): $__env->incrementLoopIndices(); $loop = $__env->getLastLoop(); ?> <?php if($valuePosts->category == $valueCategory->id): ?> <li class="list-group-item"> <a href="<?php echo e(route('posts_view_category', ['category' => $valueCategory->id ])); ?>"> <span class="badge bg-default pull-right"><?php echo e($valuePosts->count); ?></span> <?php echo e($valueCategory->name); ?> </a> </li> <?php else: ?> <li class="list-group-item"> <a href="<?php echo e(route('posts_view_category', ['category' => 0 ])); ?>"> <span class="badge bg-default pull-right"><?php echo e($valuePosts->count); ?></span> Uncategorized </a> </li> <?php endif; ?> <?php endforeach; $__env->popLoop(); $loop = $__env->getLastLoop(); ?> <?php endforeach; $__env->popLoop(); $loop = $__env->getLastLoop(); if ($__empty_1): ?> <small>No category found</small> <?php endif; ?> </ul> <h5 class="font-bold">Recent Posts</h5> <div> <?php $__empty_1 = true; $__currentLoopData = $recent_posts; $__env->addLoop($__currentLoopData); foreach($__currentLoopData as $rp): $__env->incrementLoopIndices(); $loop = $__env->getLastLoop(); $__empty_1 = false; ?> <div> <a class="pull-left thumb thumb-wrapper m-r"> <div class="img-recent" style="background-image:url('<?php echo e(asset('uploaded/media/'.$rp->image)); ?>')"></div> </a> <div class="clear"> <a href="<?php echo e(route('posts_detail', ['slug' => $rp->slug ])); ?>" class="font-semibold text-ellipsis"><?php echo e($rp->title); ?></a> <div class="text-xs block m-t-xs"><?php echo e(Carbon\Carbon::parse($rp->published)->diffForHumans()); ?></div> </div> </div> <div class="line"></div> <?php endforeach; $__env->popLoop(); $loop = $__env->getLastLoop(); if ($__empty_1): ?> <small>No recent posts found</small> <?php endif; ?> </div> </div> </div> </div> <?php $__env->stopSection(); ?> <?php $__env->startSection('modal'); ?> <div class="modal fade" id="modal-delete" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"> <div class="modal-dialog modal-sm" role="document"> <form action="<?php echo e(route('posts_delete')); ?>" method="post"> <?php echo e(csrf_field()); ?> <input type="hidden" name="id"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button> <h4 class="modal-title" id="myModalLabel">Delete Post</h4> </div> <div class="modal-body"> <input type="hidden" name="id"> Are you sure you want to delete this post? </div> <div class="modal-footer"> <button type="button" class="btn btn-default" data-dismiss="modal">No</button> <button type="submit" class="btn btn-danger">Yes</button> </div> </div> </form> </div> </div> <?php $__env->stopSection(); ?>
<?php echo $__env->make('admin.layouts.main', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>